# 🏢 ویرایشگر داده‌های سازمانی - راهنمای استفاده

## 📋 **توضیحات کلی**
این قابلیت جدید به شما امکان ویرایش، افزودن و حذف آیتم‌های سازمانی را مستقیماً از طریق رابط کاربری می‌دهد. تمام تغییرات می‌توانند در فایل `data.json` اصلی ذخیره شوند.

## 🚀 **نحوه راه‌اندازی**

### **1. نصب Dependencies**
```bash
yarn install
```

### **2. اجرای سرور**
```bash
# برای توسعه
yarn dev

# برای تولید و اجرا
yarn start
```

### **3. دسترسی به ویرایشگر**
- از منوی کناری روی "ویرایش داده‌ها" کلیک کنید
- مودال ویرایشگر باز می‌شود

## 🎯 **قابلیت‌های اصلی**

### **🌳 نمایش درخت سازمانی**
- نمایش سلسله مراتب کامل سازمان
- نشانگر سطح هر آیتم
- نمایش اطلاعات پرسنل و نوع استخدام
- رنگ‌بندی آیتم‌های انتخاب شده

### **✏️ ویرایش آیتم‌ها**
- **ویرایش عنوان**: تغییر نام پست یا بخش
- **ویرایش نام پرسنل**: تغییر نام و نام خانوادگی
- **ویرایش نوع استخدام**: انتخاب از گزینه‌های موجود
- **ذخیره تغییرات**: اعمال تغییرات در حافظه

### **➕ افزودن آیتم جدید**
- انتخاب والد (ریشه یا آیتم موجود)
- تعریف عنوان جدید
- تعریف نام پرسنل (اختیاری)
- انتخاب نوع استخدام
- افزودن به ساختار سازمانی

### **🗑️ حذف آیتم‌ها**
- حذف آیتم و تمام زیرمجموعه‌های آن
- تأیید قبل از حذف
- به‌روزرسانی خودکار ساختار

## 💾 **ذخیره تغییرات**

### **دو روش ذخیره:**

#### **1. ذخیره موقت (در حافظه)**
- تغییرات در رابط کاربری اعمال می‌شوند
- با بستن مودال، تغییرات از دست می‌روند
- برای تست تغییرات مناسب است

#### **2. ذخیره دائمی (در فایل)**
- کلیک روی "✅ اعمال و ذخیره تغییرات"
- فایل `data.json` به‌روزرسانی می‌شود
- تغییرات دائمی و قابل دسترسی هستند
- نمایش پیام موفقیت

## 🔧 **تنظیمات سرور**

### **پورت پیش‌فرض**: 3001
### **Endpoint API**: `/api/save-data`
### **محدودیت فایل**: 10 مگابایت

## 📁 **ساختار فایل‌ها**

```
project/
├── src/
│   └── components/
│       └── DataEditor.jsx    # کامپوننت اصلی ویرایشگر
├── server.js                 # سرور Express
├── public/
│   └── data.json            # فایل داده‌های سازمانی
└── package.json
```

## ⚠️ **نکات مهم**

### **قبل از ذخیره:**
- ✅ تمام فیلدهای اجباری را پر کنید
- ✅ ساختار سلسله مراتبی را بررسی کنید
- ✅ از صحت داده‌ها اطمینان حاصل کنید

### **بعد از ذخیره:**
- 🔄 صفحه را رفرش کنید تا تغییرات اعمال شوند
- 📊 نمودارها و لیست‌ها به‌روزرسانی می‌شوند
- 💾 فایل `data.json` پشتیبان تهیه کنید

## 🎨 **ویژگی‌های UI/UX**

### **رنگ‌بندی:**
- **آبی**: ویرایش و اعمال تغییرات
- **سبز**: افزودن آیتم جدید
- **قرمز**: حذف آیتم‌ها
- **نارنجی**: بازنشانی تغییرات

### **انیمیشن‌ها:**
- Hover effects روی دکمه‌ها
- Transition های نرم
- Loading states
- Success/Error messages

### **Responsive Design:**
- سازگار با اندازه‌های مختلف صفحه
- اسکرول طبیعی در مودال
- Layout انعطاف‌پذیر

## 🚨 **عیب‌یابی**

### **مشکلات رایج:**

#### **خطای "فایل ارسال نشده است"**
- مطمئن شوید سرور در حال اجرا است
- پورت 3001 را بررسی کنید
- فایل‌های سرور را بررسی کنید

#### **خطای "JSON نامعتبر"**
- ساختار داده‌ها را بررسی کنید
- از فرمت صحیح JSON اطمینان حاصل کنید
- کاراکترهای خاص را بررسی کنید

#### **تغییرات اعمال نمی‌شوند**
- صفحه را رفرش کنید
- سرور را مجدداً راه‌اندازی کنید
- فایل `data.json` را بررسی کنید

## 📞 **پشتیبانی**

برای گزارش مشکلات یا درخواست ویژگی‌های جدید:
1. بررسی کنید که تمام dependency ها نصب شده‌اند
2. سرور را مجدداً راه‌اندازی کنید
3. فایل‌های log سرور را بررسی کنید

---

**🎉 حالا می‌توانید داده‌های سازمانی را به راحتی ویرایش و مدیریت کنید!**
